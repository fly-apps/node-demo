<% if (options.prisma) { -%>
  // Get current count (may return hull)
  let welcome = await prisma.welcome.findFirst();

  // Increment count, creating table row if necessary
  if (welcome) {
    count = welcome.count + 1;
    await prisma.welcome.update({data: { count }, where: {id: welcome.id}});
  } else {
    count = 1;
    await prisma.welcome.create({data: { count }});
  }
<% } else if (options.postgres) { -%>
  if (postgres.client) {
    // increment count, creating table row if necessary    let result = await postgres.client.query('SELECT "count" from "welcome"');

    // increment count, creating table row if necessary
    if (!result.rows.length) {
      count = 1;
      await postgres.client?.query('INSERT INTO "welcome" VALUES($1)', [count]);
    } else {
      count = result.rows[0].count + 1;
      await postgres.client?.query('UPDATE "welcome" SET "count" = $1', [count]);
    }
  }
<% } else if (options.sqlite3) { -%>
  // increment count, creating table row if necessary
  await new Promise<% if (options.typescript) { %><void><% } %>((resolve, reject) => {
<% if (options.typescript) { -%>
  interface Welcome {
    count: number
  };

<% } -%>
    db.get('SELECT "count" from "welcome"', (err, row<% if (options.typescript) { %>: Welcome | null<% } %>) => {
      let query = 'UPDATE "welcome" SET "count" = ?';

      if (err) {
        reject(err);
        return
      } else if (row) {
        count = row.count + 1;
      } else {
        count = 1;
        query = 'INSERT INTO "welcome" VALUES(?)'
      }

      db.run(query, [count], err => {
        err ? reject(err) : resolve()
      })
    })
  });
<% } else { -%>
  // increment counter in counter.txt file
  try {
    count = parseInt(fs.readFileSync('counter.txt', 'utf-8')) + 1;
  } catch {
    count = 1;
  }

  fs.writeFileSync('counter.txt', count.toString());
<% } -%>